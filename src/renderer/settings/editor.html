<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>编辑器设置</title>
    <link rel="stylesheet" href="../css/settings.css">
</head>
<body>
    <div class="settings-container">
        <div class="settings-layout">
            <div class="settings-sidebar">
                <div class="sidebar-item active" data-target="general">常规设置</div>
                <div class="sidebar-item" data-target="appearance">外观样式</div>
                <div class="sidebar-item" data-target="behavior">编辑器行为</div>
                <div class="sidebar-item" data-target="keybindings">快捷键</div>
            </div>
            
            <div class="settings-main">
                <div id="general" class="settings-section active">
                    <div class="section-title">常规设置</div>
                    
                    <div class="setting-group">
                        <label for="editor-font">字体家族</label>
                        <div class="input-group">
                            <select id="editor-font" class="form-select">
                            </select>
                        </div>
                        <div class="hint">选择编辑器使用的主要字体</div>
                    </div>

                    <div class="setting-group">
                        <label for="editor-font-size">字体大小</label>
                        <div class="input-group">
                            <input type="number" id="editor-font-size" min="8" max="72" value="14">
                            <span class="unit">px</span>
                        </div>
                    </div>

                    <div class="setting-group">
                        <label for="editor-tab-size">缩进宽度 (Tab Size)</label>
                        <div class="input-group">
                            <input type="number" id="editor-tab-size" min="1" max="16" value="4">
                            <span class="unit">spaces</span>
                        </div>
                    </div>
                </div>
                <div id="appearance" class="settings-section">
                    <div class="section-title">外观样式</div>

                    <div class="setting-group">
                        <label for="editor-theme">颜色主题</label>
                        <div class="input-group">
                            <select id="editor-theme" class="form-select">
                                <option value="dark">默认深色 (Dark)</option>
                                <option value="light">默认浅色 (Light)</option>
                                <option value="monokai">Monokai</option>
                                <option value="github-light">GitHub Light</option>
                                <option value="github-dark">GitHub Dark</option>
                                <option value="solarized-light">Solarized Light</option>
                                <option value="solarized-dark">Solarized Dark</option>
                                <option value="dracula">Dracula</option>
                            </select>
                        </div>
                        <div class="settings-note" style="margin-top: 8px;">
                            <span class="settings-note-label">注意：</span>
                            <span class="settings-note-text">更改主题后将自动应用</span>
                        </div>
                    </div>

                    <div class="setting-group">
                        <label for="editor-opacity">窗口透明度</label>
                        <div class="input-group" style="display: flex; align-items: center;">
                            <input type="range" id="editor-opacity" min="0.2" max="1.0" step="0.01" value="1.0" style="flex: 1; margin-right: 10px;">
                            <span id="editor-opacity-value" style="min-width: 40px;">100%</span>
                        </div>
                    </div>

                    <div class="setting-group">
                        <label for="editor-bg-image">背景图片</label>
                        <div class="input-group">
                            <input type="text" id="editor-bg-image" class="form-control" placeholder="未设置背景图片" readonly>
                            <button id="browse-bg-image" class="btn btn-secondary">浏览</button>
                            <button id="clear-bg-image" class="btn btn-secondary">清除</button>
                        </div>
                        <div class="hint">设置自定义背景图片 (支持 PNG, JPG, GIF)</div>
                    </div>

                    <div class="setting-group">
                        <label class="checkbox-label">
                            <input type="checkbox" id="editor-font-ligatures" checked>
                            <span class="checkmark"></span>
                            启用字体连字 (Font Ligatures)
                        </label>
                        <div class="hint" style="margin-left: 28px;">需要字体支持 (如 Fira Code, JetBrains Mono)</div>
                    </div>
                </div>

                <div id="behavior" class="settings-section">
                    <div class="section-title">编辑器行为</div>

                    <div class="setting-group">
                        <label class="checkbox-label">
                            <input type="checkbox" id="editor-folding" checked>
                            <span class="checkmark"></span>
                            启用代码折叠
                        </label>
                    </div>

                    <div class="setting-group">
                        <label class="checkbox-label">
                            <input type="checkbox" id="editor-sticky-scroll" checked>
                            <span class="checkmark"></span>
                            启用 Sticky Scroll (顶部吸附显示当前作用域)
                        </label>
                    </div>

                    <div class="setting-group">
                        <label for="markdown-mode">Markdown 编辑模式</label>
                        <div class="input-group">
                            <select id="markdown-mode" class="form-select">
                                <option value="code">代码模式</option>
                                <option value="split">分屏预览</option>
                                <option value="wysiwyg">所见即所得</option>
                            </select>
                        </div>
                        <div class="hint">设置打开 Markdown 文件时的默认编辑模式。所见即所得模式支持直接在渲染视图中编辑。</div>
                    </div>

                    <div class="setting-group">
                        <label class="checkbox-label">
                            <input type="checkbox" id="editor-auto-save-enabled" checked>
                            <span class="checkmark"></span>
                            启用自动保存
                        </label>
                    </div>

                    <div class="setting-group">
                        <label for="editor-auto-save-interval">自动保存间隔</label>
                        <div class="input-group">
                            <input type="number" id="editor-auto-save-interval" min="10" max="3600" value="60">
                            <span class="unit">秒</span>
                        </div>
                    </div>
                </div>

                <div id="keybindings" class="settings-section">
                    <div class="section-title">快捷键</div>
                    <div class="setting-group">
                        <div class="hint">输入组合键（如 Ctrl+Shift+G）。留空将使用默认值。</div>
                        <div id="keybindings-list" class="keybindings-grid"></div>
                        <div style="margin-top: 10px; display: flex; gap: 10px;">
                            <button id="reset-keybindings" class="btn btn-secondary">恢复全部默认快捷键</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="settings-footer">
            <button id="save-settings" class="btn btn-primary">保存设置</button>
            <button id="cancel-settings" class="btn btn-secondary">取消</button>
            <button id="reset-settings" class="btn btn-warning">重置默认</button>
        </div>
    </div>

    <div id="font-download-dialog" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>下载字体</h3>
                <button id="close-font-dialog" class="close-btn">&times;</button>
            </div>
            <div class="modal-body">
                <p>选择要下载的字体：</p>
                <div id="font-list" class="font-list">
                </div>
            </div>
        </div>
    </div>

    <div id="message-container"></div>

    <script src="../js/electron-helper.js"></script>
    <script src="../../utils/font-detector.js"></script>
    <script>

    document.addEventListener('DOMContentLoaded', () => {
    });
    
    window.addEventListener('load', () => {
    });
</script>
<script src="editor.js"></script>
</body>
</html>
